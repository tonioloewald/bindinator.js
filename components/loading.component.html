<!--
# loading
Copyright Â©2016-2017 Tonio Loewald
-->
<style>
  .loading-spinner {
    opacity: 1;
    animation: fade-in 1s ease-in;
  }
</style>
<div style="text-align: center; padding: 10%; border-radius: 4px;" class="loading-spinner">
  <svg style="width: 64px; height: 64px;" viewBox="0, 0, 128, 128">
    <path d="M81.8,108.5 L87.7,123.3 C80.2,126.6 72.1,127.7 64,128 L64,112 L64,112 C70.0,111.9 76.1,110.9 81.8,108.5 z" fill-opacity="0.1"/>
    <path d="M39.7,105.4 C45.0,108.3 50.8,110.8 56.9,111.4 L54.6,127.1 C46.5,126.2 38.9,123.1 31.7,119.3 L39.7,105.4 z" fill-opacity="0.2"/>
    <path d="M22.4,87.9 C25.3,93.4 29.6,97.8 34.3,101.6 L24.4,114.2 C17.8,109.4 12.8,102.9 8.5,96 L22.4,87.9 z" fill-opacity="0.3"/>
    <path d="M16,64 C16.0,70.0 17.0,76.1 19.4,81.8 L4.6,87.7 C1.3,80.2 0.2,72.1 -0,64 L16,64 z" fill-opacity="0.4"/>
    <path d="M123.3,40.2 C126.6,47.7 127.7,55.8 128,64 L112,64 C111.9,57.9 110.9,51.8 108.5,46.1 L123.3,40.2 z" fill="gray"/>
    <path d="M8.5,32.2 L22.3,40.2 C19.3,45.4 17.0,51.3 16.4,57.4 L0.7,55.1 C1.5,47.0 4.7,39.3 8.5,32.2 z" fill-opacity="0.5"/>
    <path d="M103.5,13.7 C110.1,18.5 115.1,25.0 119.4,32 L105.5,40.0 C102.6,34.5 98.3,30.1 93.6,26.3 L103.5,13.7 z" fill-opacity="0.9"/>
    <path d="M32.2,8.4 L40.2,22.3 C34.8,25.2 30.3,29.4 26.4,34.1 L13.9,24.3 C18.7,17.7 25.3,12.6 32.2,8.4 z" fill-opacity="0.6"/>
    <path d="M72.9,0.5 C81.0,1.4 88.6,4.5 95.7,8.4 L87.7,22.3 C82.5,19.3 76.6,17.0 70.6,16.4 L72.9,0.5 z" fill-opacity="0.8"/>
    <path d="M64,16 C57.9,16.0 51.8,17.0 46.1,19.4 L40.2,4.6 C47.7,1.2 55.8,0.3 64,-0 L64,16 z" fill-opacity="0.7"/>
  </svg>
</div>
<script>
/* global component, findOne, find, b8r, set */
'use strict'

const interval_ms = parseInt(component.getAttribute('interval') || '250', 10)
const fill = component.getAttribute('fill') || 'white'
const div = findOne('div')
div.style.background = component.getAttribute('background') || 'rgba(0,0,0,0.25)'
find('path').forEach(elt => elt.style.fill = fill)
let rot = 0

const interval_id = setInterval(() => {
  if (div && b8r.isInBody(div)) {
    rot = (rot + 30) % 360
    findOne('svg').style.transform = 'rotateZ(' + rot + 'deg)'
  }
}, interval_ms)

set('destroy', () => clearInterval(interval_id))
</script>
